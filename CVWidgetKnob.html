<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="1038.36">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica; min-height: 17.0px}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; min-height: 14.0px}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco}
p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #ab3b37}
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #8d5f5b}
span.s1 {font: 19.0px Helvetica}
span.s2 {color: #4d5252}
span.s3 {color: #4c5252}
span.s4 {color: #1157a1}
span.s5 {color: #3f5662}
span.s6 {color: #435660}
span.s7 {color: #3d4f59}
span.s8 {text-decoration: underline ; color: #3d4f59}
span.s9 {color: #4e5252}
span.s10 {font: 12.0px Helvetica}
span.s11 {color: #194568}
span.s12 {color: #716072}
span.s13 {color: #475446}
span.s14 {color: #666666}
span.s15 {color: #000000}
span.s16 {color: #874187}
span.s17 {color: #4b5253}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><span class="s1"><b>CVWidgetKnob </b></span><b>a widget, wrapping <i>one</i> CV, providing a knob and a number-field for mouse-/keyboard-control resp. an automated midi-learn functionality to connect to midi-sliders on external hardware</b></p>
<p class="p2"><br></p>
<p class="p1"><b>inherits from: </b><a href="sc://Object"><span class="s2"><b>Object</b></span></a><b> : CVWidget</b></p>
<p class="p1"><b>dependencies: </b><a href="../../../quarks/Conductor/help/Conductor-Help/Conductor.html"><span class="s2"><b>Conductor</b></span></a><b> (</b><a href="sc://Quarks"><span class="s3"><b>Quarks</b></span></a><b>)</b></p>
<p class="p1"><b>optional: </b><a href="../../../quarks/wslib/wslib-help/wslib.html"><span class="s4"><b>wslib</b></span></a><b> (</b><a href="sc://Quarks"><span class="s4"><b>Quarks</b></span></a><b>)</b></p>
<p class="p2"><br></p>
<p class="p1">A<b> CVWidget </b>resp. its subclasses are supposed to be convenient GUI-classes similar to <a href="sc://EZSlider"><span class="s2"><b>EZGui</b></span></a><b> </b>resp. its subclasses <a href="sc://EZSlider"><span class="s5"><b>EZSlider</b></span></a>, <a href="../../../../../../../../Applications/SuperCollider3/common/build/Help/GUI/EZ-GUI/EZKnob.html"><span class="s6"><b>EZKnob</b></span></a><span class="s6">, <a href="../../../../../../../../Applications/SuperCollider3/common/build/Help/GUI/EZ-GUI/EZRanger.html"><span class="s7"><b>EZRanger</b></span></a></span><span class="s8"> </span>etc. and it should be possible to use it any GUI. However, its primary purpose is not the use as such. Much rather it should be understood as a module for <a href="CVCenter.html"><span class="s2"><b>CVCenter</b></span></a>.</p>
<p class="p2"><br></p>
<p class="p1">A CVWidgetKnob is GUI-representation of a <a href="../../../quarks/Conductor/help/Conductor-Help/CV.html"><span class="s9"><b>CV</b></span></a><b> </b>(requires the <a href="../../../quarks/Conductor/help/Conductor-Help/Conductor.html"><span class="s9"><b>Conductor</b></span></a>-Quark to be installed). Instantiating a CVWidgetKnob as an element in a GUI automatically instantiates a <a href="../../../quarks/Conductor/help/Conductor-Help/CV.html"><span class="s9"><b>CV</b></span></a> that can be controlled by a slider (a <a href="sc://Knob"><span class="s9"><b>Knob</b></span></a>), a numerical input (a <a href="sc://NumberBox"><span class="s9"><b>NumberBox</b></span></a>) or a MIDI-device. CVWidgetKnobs have a built in MIDI-learn capability (see also <a href="sc://CCResponder"><span class="s9"><b>CCResponder</b></span></a>) - a slider or fader of a connected MIDI-device will automatically be connected if the MIDi-learn button is clicked in the widget and a hardware-slider is moved.<span class="Apple-tab-span">	</span></p>
<p class="p3"><br></p>
<p class="p4"><b>Creation</b></p>
<p class="p3"><br></p>
<p class="p1"><b>*new(parent, cv, name, bounds, setUpArgs)</b></p>
<p class="p1"><b><span class="Apple-tab-span">	</span>parent</b> - the parent view: e.g. a Window or a TabbedView</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>cv</b> - a CV (have a look at the CV helpfile for mor information on that)</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>name</b> - each CVWidget will have a label displaying this name</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>bounds</b> - an instance of <b>Rect</b>. The default widget-width will be 52 pixel, the widget-height will be 137 pixel.<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-tab-span">	</span><b>setUpArgs</b> - an array reflecting the setup of the connected external MIDI-device. If the setup consits of a single value (e.g.: 0) it will internally be converted into an array.<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-tab-span">	</span>If not given explicitely new widgets will be instantiated with the following values:</p>
<p class="p5"><span class="Apple-tab-span">	</span></p>
<p class="p6"><span class="Apple-tab-span">	</span>[ 0, 1, 64, "", nil, 0.1 ]</p>
<p class="p5"><span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="Apple-tab-span">	</span>which stands for <i>midiMode</i>: 0, <i>midiResolution</i>: 1, <i>midiMean</i>: 64, <i>midistring</i>: empty string, <i>ctrlButtonBank</i>: nil and <i>softWithin</i>: 0.1</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="Apple-tab-span">	</span>Currently two different (midi)modes are supported (represented by <i>midiMode</i> ):</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0: MIDI-output is 0-127</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>1: MIDI-output is a mean-value +/- in-/decrement. If no value for <i>midiMean</i> (third slot in setUpArgs) is given 64 is assumed to be the default value for <i>midiMean</i>.</p>
<p class="p1"><span class="Apple-tab-span">	</span><i>ctrlButtonBank</i> is a special parameter that can always be set to nil. However, if you work with a device like a Doepfer Pocket-Dial, which provides 16 hardware-knobs in 4 different banks, resulting in 64 possible controllers, <i>ctrlButtonBank</i> can be set to 16 (the number of controllers in one bank). This should make working with the gui more convenient as the controller-number will not simply be displayed as one in a consecutive row of numbers (e.g. 1-64) but rather as a combination of <i>bank</i>:<i>ctrl-nr </i>(e.g. 3:10 will stand for bank nr. 3 and controller 10). <i>ctrlButtonBank</i> should always be set to the number of knobs/sliders available in one bank.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1"><b>Note:</b> Setting a CVWidget to midiMode 1 will only make sense if your MIDI-device supports it. In this mode a MIDI-slider is assumed to output an in-/decremental value, not an absolute value between 0 and 127. However, the output is not assumed to be the increment/decrement only. Rather it will be the <i>mean</i> value +/- increment which makes it necessary to substract <i>mean</i> from the output (e.g. if the output equals 68 and <i>mean </i>is 64, a<i> </i>value of 64 is substracted and the result will be 4).</p>
<p class="p2"><br></p>
<p class="p1"><b>midiMode_</b></p>
<p class="p1"><span class="Apple-tab-span">	</span>0 - the default mode. The output reflects the absolute position of the adjecant slider.<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-tab-span">	</span>1 - in- resp. decremental output. The Output will be a mean-value (default: 64, see method <b>midiMean_</b>) +/- in- or decrement (determined be the the slider's accelaration)</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1"><b>midiResolution_</b></p>
<p class="p1"><span class="Apple-tab-span">	</span>default: 1</p>
<p class="p1"><span class="Apple-tab-span">	</span>This parameter will only have an effect if midiMode is set to 1 (endless faders). It determines the resolution of each fader. Higher values will result in a lower resolution, lower values will have the opposite effect.<span class="Apple-converted-space"> </span></p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p1"><b>midiMean_</b><span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-tab-span">	</span>default: 64. Only relevant for midiMode == 1. It reflects the default output of a midislider in neutral position.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1"><b>midistring_</b></p>
<p class="p1"><span class="Apple-tab-span">	</span>A string, that may display details of your current midi-settings (certain details like the midi-silder's source-id, the channel, the controller-number will automatically displayed when a widget gets instantiated)</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1"><b>ctrlButtonBank_</b></p>
<p class="p1"><span class="Apple-tab-span">	</span>As midi-devices may have a number of different banks at limited number of sliders this offers some convenience in a way that the GUI will display the bank and its sliders from 1 to the max. number of hardware sliders. E.g. on a Doepfer Pocket Dial which has 16 sliders and 4 banks a setting like</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p6"><span class="s10"><span class="Apple-tab-span">	</span></span>CVCenter.ctrlButtonBank_(16)</p>
<p class="p5"><span class="Apple-tab-span">	</span></p>
<p class="p1">will display the sliders in each bank like the following: 1:1..16, 2:1..16, 3:1..16, 4:1..16. Thus, e.g. slider number 36 (which is returned by the function within the corresponding CCResponder as 35) will be displayed as 3:4 (bank nr. 3, slider number 4 - corresponding to the number printed on the device and the selected bank).<span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p1"><b>softWithin_(val)</b></p>
<p class="p1"><span class="Apple-tab-span">	</span>val - by default 0.1</p>
<p class="p1"><span class="Apple-tab-span">	</span>a convenience method for the use in mode 0 (output: 0-127, non-endless). A new value (input) of a CV is set by a MIDI-slider only if the slider's value is within +/- softWithin/2 to the current value (input) of the CV, avoiding abrupt changes.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1">Each of the previously mentioned setter-methods are implemented as getters as well, which allows you to retrieve its values individually. Alternatively you may use *setup to retrieve all values at once:</p>
<p class="p2"><br></p>
<p class="p1"><b>setup</b></p>
<p class="p1"><span class="Apple-tab-span">	</span>A convenience-method, returning<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="s10"><span class="Apple-tab-span">	</span></span>[midiMode, midiMean, midistring, ctrlButtonBank, softwithin]</p>
<p class="p2"><br></p>
<p class="p4"><b>Example</b></p>
<p class="p3"><br></p>
<p class="p6">s.boot;</p>
<p class="p6">a = { <span class="s11">|freq=220|</span> <span class="s11">SinOsc</span>.ar({ <span class="s11">|i|</span> freq+i }!<span class="s12">2</span>, mul: <span class="s12">0.3</span>) }.play;</p>
<p class="p5"><br></p>
<p class="p6">(</p>
<p class="p6">~cv = <span class="s11">CV</span>.new(<span class="s13">\freq</span>.asSpec);<span class="Apple-converted-space"> </span></p>
<p class="p6">~wdgt = <span class="s11">CVWidgetKnob</span>(<span class="s11">nil</span>, ~cv, <span class="s14">"CV test"</span>, action: { <span class="s11">|cv|</span> a.set(<span class="s13">\freq</span>, cv.value) } );</p>
<p class="p6">~wdgt.front;</p>
<p class="p6">)</p>
<p class="p5"><br></p>
<p class="p7">// MIDI</p>
<p class="p7"><span class="s15">~wdgt.midiConnect(chan: </span><span class="s16">0</span><span class="s15">, num: </span><span class="s16">2</span><span class="s15">) </span>// connect to controller nr. 3, channel 1</p>
<p class="p7"><span class="s15">~wdgt.midiDisconnect </span>// remove the CCResponder again</p>
<p class="p7"><span class="s15">~wdgt.midiConnect </span>// connect to the first slider that gets moved on your hardware</p>
<p class="p6">~wdgt.midiDisconnect</p>
<p class="p5"><br></p>
<p class="p6">~wdgt.midiLearn.valueAction_(1)</p>
<p class="p5"><br></p>
<p class="p6">~wdgt.oscInputConstraints_(4@200)</p>
<p class="p6">~wdgt.editor</p>
<p class="p6">~wdgt.calibrate_(false)</p>
<p class="p6">~wdgt.wdgtControllersAndModels.oscInputRange.model.value</p>
<p class="p5"><br></p>
<p class="p6">a.free;</p>
<p class="p6">~cv.action_({ <span class="s11">|cv|</span> cv.value.postln })</p>
<p class="p5"><br></p>
<p class="p8">// change the Spec of the CV</p>
<p class="p8">// change is reflected in the widget immediately</p>
<p class="p8">// can also be done through the "edit Spec" button in the widget</p>
<p class="p6">~wdgt.spec_(<span class="s13">\freq</span>.asSpec)</p>
<p class="p5"><br></p>
<p class="p8">// change the MIDI-setup</p>
<p class="p8">// change will only take effect after disconnecting and reconnecting the MIDI-device</p>
<p class="p8"><span class="s15">~wdgt.midiMode_(</span><span class="s12">1</span><span class="s15">); </span>// in-/decremental output mode</p>
<p class="p8"><span class="s15">~wdgt.midiMean_(</span><span class="s12">64</span><span class="s15">); </span>// only necessary if midiMode == 1</p>
<p class="p8"><span class="s15">~wdgt.midistring_(</span><span class="s14">"in-/decremtal"</span><span class="s15">); </span>// an arbitrary string displaying some info about the midi-setting of the widget</p>
<p class="p8"><span class="s15">~wdgt.ctrlButtonBank_(</span><span class="s12">16</span><span class="s15">); </span>// should reflect the number of knobs/sliders on your hardware-device.</p>
<p class="p5"><br></p>
<p class="p8">// set some Synth-Controls<span class="Apple-converted-space"> </span></p>
<p class="p6">a = { <span class="s11">|freq=440|</span> <span class="s11">SinOsc</span>.ar(freq, mul: <span class="s12">0.4</span>) }.play</p>
<p class="p6">~cv.action_({ <span class="s11">|cv|</span> a.set(<span class="s13">\freq</span>, cv.value) })</p>
<p class="p2"><br></p>
<p class="p4"><b>about the GUI</b></p>
<p class="p3"><br></p>
<p class="p1">The Elements within the GUI should be more or less selfexplanatory. However, one might ask why there the name is reflected twice - once as a non-editable label, once as an editable textfield. The reason for this is, that within <a href="CVCenter.html"><span class="s17"><b>CVCenter</b></span></a> the label will reflect the key-name under which a CV has been added to <b>CVCenter</b>. The key may or may not reflect a key of a pattern or a control of a synth. However, a CV as part of <b>CVCenter</b> may be used in any context, so it may be useful to be able to add some addititional information, independantly from the key-name.</p>
<p class="p1">Within every CVWidget there is a blue button, labeled "L". This stands for "learn" - when clicked the button-color turns to red and the label becomes "X". In this state the first MIDI-slider that gets moved gets connected to the particular CVWidget resp. the parameters controlled by it.</p>
<p class="p1">Last but not least you will find a (non-functional) button named "MIDI" - this should become a shortcut to the widget's MIDI-setup. As it is currently not known to the author which different setups will be useful to provide this functionality shall be implemented at a later point.</p>
</body>
</html>
