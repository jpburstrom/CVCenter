<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="949.54">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 19.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica; min-height: 17.0px}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco}
p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; min-height: 14.0px}
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #7b6d6c; min-height: 14.0px}
p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #9c4f4b}
p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #074083}
p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #3e5c3d}
span.s1 {color: #43545c}
span.s2 {color: #105296}
span.s3 {color: #205a8b}
span.s4 {color: #0032e6}
span.s5 {font: 12.0px Helvetica}
span.s6 {font: 10.0px Monaco}
span.s7 {color: #00339d}
span.s8 {color: #30652f}
span.s9 {color: #000000}
span.s10 {color: #3e5c3d}
span.s11 {color: #074083}
span.s12 {color: #7b547c}
span.s13 {color: #666666}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><b>CVCenter</b></p>
<p class="p2"><br></p>
<p class="p3"><b>inherits from: </b><a href="SC://Object"><span class="s1"><b>Object</b></span></a></p>
<p class="p3"><b>dependencies: </b><a href="CVWidget.html"><span class="s2"><b>CVWidget</b></span></a><b>, </b><a href="../../../quarks/Conductor/help/Conductor-Help/Conductor.html"><span class="s2"><b>Conductor</b></span></a><b>, </b><a href="../../../quarks/TabbedView/TabbedView.html"><span class="s3"><b>TabbedView</b></span></a><span class="s3"><b>.<span class="Apple-converted-space"> </span></b></span><b> (Conductor and TabbedView are extensions available as </b><a href="SC://Quarks"><span class="s2"><b>Quarks</b></span></a><b>). Optional: </b><a href="../../../quarks/wslib/wslib-help/wslib.html"><span class="s4"><b>wslib</b></span></a><b> (Quarks)</b></p>
<p class="p2"><span class="Apple-converted-space"> </span></p>
<p class="p3">CVCenter is a collection of <a href="../../../quarks/Conductor/help/Conductor-Help/CV.html"><span class="s1"><b>CV</b></span></a>s and a convenience GUI-class for their use in patterns (and other uses of a <b>CV</b>). <span class="Apple-converted-space"> </span></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p4"><b>Creation</b></p>
<p class="p5"><br></p>
<p class="p3"><b>*new(cvs, setUpArgs)</b></p>
<p class="p3"><i><span class="Apple-tab-span">	</span>There should be no need to call *new directly as other methods will do this internally.</i></p>
<p class="p3"><span class="Apple-tab-span">	</span><b>cvs</b> - a Dictionary, an IdentyDictionary or an Event, containing one or more CVs as key-value pair</p>
<p class="p3"><span class="Apple-tab-span">	</span><b>setUpArgs</b> - an array of setup-arguments.</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[midiMode, midiResolution, midiMean, midistring, ctrlButtonBank, softWithin]<span class="Apple-converted-space"> <span class="Apple-tab-span">	</span></span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>For an explanation for the meaning of each slot see below.</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p3">The following setter-methods determine a global setup for all CVWidgets contained in CVCenter. They are implemented as simple getters/setters with inbuilt logic besides their getter/setter functionality. You can set e.g. CVCenter.midiMode_(1) <i>before</i> actually calling CVCenter.new and CVCenter will remember the setting.<span class="Apple-converted-space"> </span></p>
<p class="p3">When a setter is called while CVCenter-gui is visible, the inbuilt SkipJack-machanism will grab a newly set value every 0.5 seconds, thus updating CVCenter's setup.</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p3"><b>*midiMode_</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>0: MIDI-output is 0-127</p>
<p class="p3"><span class="Apple-tab-span">	</span>1: MIDI-output is a mean-value +/- in-/decrement. If no value for <i>mean</i> is given in the setup-array 64 is assumed to be the default value for <i>mean</i>.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><b>*midiResolution_</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>default: 1</p>
<p class="p3"><span class="Apple-tab-span">	</span>This parameter will only have an effect if midiMode is set to 1 (endless faders). It determines the resolution of each fader. Higher values will result in a lower resolution, lower values will have the opposite effect.<span class="Apple-converted-space"> </span></p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p3"><b>*midiMean_</b><span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span>default: 64. Only relevant for midiMode == 1. It reflects the default output of a midislider in neutral position.</p>
<p class="p2"><br></p>
<p class="p3"><b>*ctrlButtonBank_</b></p>
<p class="p3"><b><span class="Apple-tab-span">	</span></b>As midi-devices may have a number of different banks at limited number of sliders this offers some convenience in a way that the GUI will display the bank and its sliders from 1 to the max. number of hardware sliders. E.g. on a Doepfer Pocket Dial which has 16 sliders and 4 banks a setting like</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span></span>CVCenter.ctrlButtonBank_(16)</p>
<p class="p7"><span class="Apple-tab-span">	</span></p>
<p class="p3">will display the sliders in each bank like the following: 1:1..16, 2:1..16, 3:1..16, 4:1..16. Thus, slider number 36 (which is returned by the function within the corresponding CCResponder as 35) will be displayed as 3:4 (bank nr. 3, slider number 4 - corresponding to the number printed on the device and the selected bank).<span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p3"><b>*softWithin_(val)</b></p>
<p class="p3"><b><span class="Apple-tab-span">	</span></b>val - 0.1 by default</p>
<p class="p3"><span class="Apple-tab-span">	</span>This method is only if CVCenter is used in connection with MIDI-devices that have no endless-faders: By default moving a slider on such a device will return a value between 0 and 127. This would usually lead to unwanted "jumps" if e.g. a value that has been set by a MIDI-slider and got changed then again in the GUI is changed again by the MIDI-slider - the MIDI-slider is still in its old position while the value has been changed to something else. Thus the value would usually jump back to the value of the MIDI-slider and then follow its new setting.</p>
<p class="p3"><span class="Apple-tab-span">	</span>*softWithin_ prevents this unwanted behaviour by allowing a new value to be set via MIDI-slider only if its value is within +/- val/2. You will recognize that you first have to move the slider onto the a certain point which represent the current value of the underlying CV +/- the tolerance set by val.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3">Each of the previously mentioned setter-methods are implemented as getters as well, which allows you to retrieve its values individually. Alternatively you may use *setup to retrieve all values at once:</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p3"><b>*setup</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>A convenience-method, returning<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span></span>[midiMode, midiResolution, midiMean, midistring, ctrlButtonBank, softWithin]</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3">If no explicite setup is provided (by setting *midiMode_, *midiResolution_ etc) for <b>CVCenter</b> *setup will return <span class="s6">[nil, nil, nil, nil, nil, nil]</span>. In this case the individual settings of each widget will apply (set by their instance-methods midiMode_, midiResolution_ etc.).</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><b>*use(key, cv, value, tab, slot)</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>key - the key under which the CV-instance will be added to the CVCenter</p>
<p class="p3"><span class="Apple-tab-span">	</span>cv - an instance of CV</p>
<p class="p3"><span class="Apple-tab-span">	</span>value - the default output value. If not given the default value of the CV's Spec will be used</p>
<p class="p3"><span class="Apple-tab-span">	</span>tab - a symbol or a string indicating the tab under which the <b>CVWidget </b>will be accessible. If no tab is given the widget will be added to the currently focused tab. If the given tab doesn't exist yet the widget will be added under a new tab, named under the given name.</p>
<p class="p3"><span class="Apple-tab-span">	</span>slot - if set to either \hi or \lo a <b>CVWidget2D</b> will be instantiated:</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p6"><span class="Apple-tab-span">	</span>(</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="s7">CVCenter</span>.use(<span class="s8">\myKey</span>, slot: <span class="s8">\hi</span>);</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="s7">CVCenter</span>.use(<span class="s8">\myKey</span>, slot: <span class="s8">\lo</span>);</p>
<p class="p6"><span class="Apple-tab-span">	</span>)</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>If 'slot' is not set a <b>CVWidgetKnob</b> will be instantiated.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>*use is basically a wrapper-method that instantiates a new <b>CV</b>, adds it to <b>CVCenter</b> and either brings opens its GUI immediately or, if the GUI is already open, adds it to the GUI. If 'tab' is given the new widget will be added under the specified tab and the tab will be focused.<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span>If the given key is already in use it will not overwrite the existing one (besides when overwrite is set to true). If used in a pattern the value will be ignored as it rather seems desirable to keep the pattern-value.</p>
<p class="p3"><span class="Apple-tab-span">	</span>If no value for cv is provided a ControlSpec.new will be chosen. If no value for value is provided the default value for the given ConrolSpec will be taken.</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p3"><b>*put(key1, cv1, key2, cv2 ..., overwrite)</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>keys, cv - instances of CV at key 1-n</p>
<p class="p3"><span class="Apple-tab-span">	</span>overwrite - a boolean wether keys should overwrite existing keys. default: false.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>Changes in the CVCenter done this way will immediately be reflected in the GUI. The resulting widgets will be added to the tab that's currently focused.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><b>*removeAt(key)</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>key - a key in the CVCenters's cvsList</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>Removes a CV from the CVCenter. It should be safe to remove a CV even if it's currently in use in some Pattern - *removeAt returns the last value the CV has been set to so parameter controlled by CV should just be set to this.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><b>*removeAll(key1, key2 ...)</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>remove all CV-instances from CVCenter referenced by their key.</p>
<p class="p3"><i><span class="Apple-tab-span">	</span>If no arguments are given all CVs referenced by CVCenter.cvsList will be removed!</i></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><b>*gui(tab, key1, cv1, key2, cv2 ..., overwrite)</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>tab - a symbol or a string indicating the tab under which the widgets shall appear. If the GUI is already present this parameter will be ignored, instead the widgets will appear under the tab that is currently focused. If CVCenter is initialised via *gui and no tab is given, the first tab (under which the widgets will appear) will be named "default". <b>Note! if tab is omitted the argument-list has to be provided as an explicit array:</b> <span class="s6">cvs:[key1, cv1, key2, cv2, ... keyN, cvN]<span class="Apple-converted-space"> </span></span></p>
<p class="p3"><span class="Apple-tab-span">	</span>keys, cv - instances of CV at key 1-n</p>
<p class="p3"><span class="Apple-tab-span">	</span>overwrite - a boolean wether CVs should overwrite existing ones. default: false.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>Basically the same functionallity as *put - only the CVCenter will immediatly open its GUI if none is present.<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span>If keys that are already contained in CVCenter.cvsList are provided as arguments a warning will be issued. If overwrite is set to <i>true </i>key resp. cv will overwrite CV-instances at the given keys in CVCenter.cvsList.</p>
<p class="p3"><span class="Apple-tab-span">	</span>Keys (resp. the CV-instances added at the given key) that are not already in CVCenter.cvsList will be added to the CVCenter, other CV-instances already stored remain untouched.</p>
<p class="p3"><span class="Apple-tab-span">	</span>softWithin</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p4"><b>Example</b></p>
<p class="p7"><br></p>
<p class="p8"><br></p>
<p class="p9">// open the GUI</p>
<p class="p10">CVCenter<span class="s9">.gui</span></p>
<p class="p7"><br></p>
<p class="p9">// add some more CVs</p>
<p class="p9">// will immediatly be reflected in the GUI</p>
<p class="p10">CVCenter<span class="s9">.put(</span></p>
<p class="p9"><span class="s9"><span class="Apple-tab-span">	</span></span><span class="s10">\test1</span><span class="s9">, </span><span class="s11">CV</span><span class="s9">(</span><span class="s10">\pan</span><span class="s9">.asSpec), </span>// will be ignored - \test1 has already been added</p>
<p class="p11"><span class="s9"><span class="Apple-tab-span">	</span></span>\test4<span class="s9">, </span><span class="s11">CV</span><span class="s9">(</span>\boostcut<span class="s9">.asSpec)</span></p>
<p class="p6">)</p>
<p class="p7"><br></p>
<p class="p9">// calling .gui on the CVCenter again will not bring up another window</p>
<p class="p9">// if the GUI is closed it will be opened again</p>
<p class="p10">CVCenter<span class="s9">.gui</span></p>
<p class="p7"><br></p>
<p class="p9">// in a pattern</p>
<p class="p9">// all widgets used in the following Pbind will be added to the "default"-tab<span class="Apple-converted-space"> </span></p>
<p class="p9">// if no CVCenter-GUI is present resp. CVCenter hasn't been initialised yet.</p>
<p class="p6">p = <span class="s11">Pbind</span>(</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="s10">\dur</span>, <span class="s11">Prand</span>([<span class="s11">Pn</span>(<span class="s12">1</span>/<span class="s12">8</span>, <span class="s12">4</span>), <span class="s11">Pn</span>(<span class="s12">1</span>/<span class="s12">4</span>, <span class="s12">2</span>)], <span class="s11">inf</span>),<span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="s9"><span class="Apple-tab-span">	</span></span>// new keys will be added to CVCenter.cvsList and displayed in the GUI immediatly</p>
<p class="p9"><span class="s9"><span class="Apple-tab-span">	</span></span>// widget 'amp' will be added to a new tab named 'someTab'</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="s10">\amp</span>, <span class="s11">CVCenter</span>.use(<span class="s10">\amp</span>, [<span class="s12">0.0</span>, <span class="s12">1.0</span>].asSpec, <span class="s12">0.2</span>, <span class="s10">\someTab</span>),<span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="s9"><span class="Apple-tab-span">	</span></span>// a CVCenter slot can be used in combination with other Patterns as well</p>
<p class="p9"><span class="s9"><span class="Apple-tab-span">	</span></span>// widget 'test4' already exists in the 'default' tab - so it will *not* be added to \someTab</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="s10">\freq</span>, <span class="s11">Prand</span>([<span class="s12">64</span>, <span class="s12">66</span>, <span class="s12">67</span>, <span class="s12">69</span>, <span class="s12">71</span>, <span class="s12">72</span>].midicps, <span class="s11">inf</span>) + <span class="s11">CVCenter</span>.use(<span class="s10">\test4</span>, <span class="s10">\freq</span>.asSpec, <span class="s12">20</span>, <span class="s10">\someTab</span>)</p>
<p class="p6">).play</p>
<p class="p7"><br></p>
<p class="p9">// add another widget to another tab</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p9">// change the MIDI-setup</p>
<p class="p6"><span class="s11">CVCenter</span>.midiMode_(<span class="s12">1</span>)</p>
<p class="p7"><br></p>
<p class="p9">// removing a CV-instance while a Pattern is playing<span class="Apple-converted-space"> </span></p>
<p class="p9">// should be safe since removeAt will return its last value</p>
<p class="p6"><span class="s11">CVCenter</span>.removeAt(<span class="s10">\test4</span>)</p>
<p class="p9"><span class="s11">CVCenter</span><span class="s9">.removeAll </span>// remove all elements from CVCenter if no keys are given</p>
<p class="p7"><br></p>
<p class="p9">// Synth-controls can also be set using a CVs .action_</p>
<p class="p9">// a newly instantiated CV can be used in any context later on</p>
<p class="p11"><span class="s9">a = </span><span class="s11">Synth</span><span class="s9">(</span>\default<span class="s9">)</span></p>
<p class="p9">// the widget will be added to a tab named "Synth-Controls"</p>
<p class="p6"><span class="s11">CVCenter</span>.use(<span class="s10">\freqCV</span>, <span class="s10">\freq</span>.asSpec, <span class="s13">"Synth-Controls"</span>).action_({ <span class="s11">|cv|</span> a.set(<span class="s10">\freq</span>, cv.value) })</p>
<p class="p2"><br></p>
<p class="p4"><b>about the GUI</b></p>
<p class="p5"><br></p>
<p class="p3">A CVCenter-GUI is constantly checking the state of the CVCenter it's representing. But not only changes to the internal structure should be displayed immediatly. It is also build in a way that it will regroup its widgets when the window gets resized - the user may prefer it as a horizontal or vertical strip or a different configuration - as little as possible scrolling should be necessary to reach all widgets.<span class="Apple-converted-space"> </span></p>
</body>
</html>
