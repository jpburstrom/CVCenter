<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="1038.36">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #000000}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #000000; min-height: 14.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica; color: #000000; min-height: 17.0px}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica; color: #142cc3}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #000000; min-height: 14.0px}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #000000}
p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #008224; min-height: 14.0px}
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #008224}
p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #008224}
p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #008224; min-height: 14.0px}
p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #d21710}
p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica; color: #000000}
span.s1 {font: 19.0px Helvetica; color: #142cc3}
span.s2 {font: 19.0px Helvetica}
span.s3 {color: #142cc3}
span.s4 {text-decoration: underline}
span.s5 {color: #7b7ec6}
span.s6 {color: #737373}
span.s7 {color: #464fc4}
span.s8 {color: #008224}
span.s9 {font: 12.0px Helvetica}
span.s10 {color: #000000}
span.s11 {color: #1c39f6}
span.s12 {color: #ff7a29}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><span class="s1"><b>CVWidget2D</b></span><span class="s2"><b> </b></span><b>a widget, wrapping <i>two</i> </b><span class="s3"><b>CVs</b></span><b>, providing a twodimensional-slider, range-slider and a number-field for mouse-/keyboard-control resp. an automated midi-learn functionality to connect to midi-sliders on external hardware</b></p>
<p class="p2"><br></p>
<p class="p1"><b>inherits from: </b><a href="sc://Object"><span class="s3"><b>Object</b></span></a><b> : </b><span class="s3"><b>CVWidget</b></span></p>
<p class="p1"><b>dependencies: </b><a href="../../../quarks/Conductor/help/Conductor-Help/Conductor.html"><span class="s3"><b>Conductor</b></span></a><b> (</b><a href="sc://Quarks"><span class="s3"><b>Quarks</b></span></a><b>)</b></p>
<p class="p2"><br></p>
<p class="p1"><span class="s3">A</span><b> </b><span class="s3"><b>CVWidget</b></span><b> </b>resp. its subclasses are supposed to be convenient <span class="s3">GUI</span>-classes similar to <a href="sc://EZSlider"><span class="s3"><b>EZGui</b></span></a><b> </b>resp. its subclasses <a href="sc://EZSlider"><span class="s3"><b>EZSlider</b></span></a>, <a href="../../../../../../../../Applications/SuperCollider3/common/build/Help/GUI/EZ-GUI/EZKnob.html"><span class="s3"><b>EZKnob</b></span></a>, <a href="../../../../../../../../Applications/SuperCollider3/common/build/Help/GUI/EZ-GUI/EZRanger.html"><span class="s3"><b>EZRanger</b></span></a><span class="s4"> </span>etc. and it should be possible to use it any <span class="s3">GUI</span>. <span class="s3">However</span>, its primary purpose is not the use as such. <span class="s3">Much</span> rather it should be understood as a module for <a href="CVCenter.html"><span class="s3"><b>CVCenter</b></span></a>.</p>
<p class="p2"><br></p>
<p class="p1"><span class="s3">A</span> <span class="s3">CVWidget2D</span> is <span class="s3">GUI</span>-representation of two <a href="../../../quarks/Conductor/help/Conductor-Help/CV.html"><span class="s3"><b>CV</b></span></a><span class="s3"><b>s</b></span><b> </b>(requires the <a href="../../../quarks/Conductor/help/Conductor-Help/Conductor.html"><span class="s3"><b>Conductor</b></span></a>-<span class="s3">Quark</span> to be installed). <span class="s3">Instantiating</span> a <span class="s3">CVWidget2D</span> as an element in a <span class="s3">GUI</span> automatically instantiates two <a href="../../../quarks/Conductor/help/Conductor-Help/CV.html"><span class="s3"><b>CV</b></span></a><span class="s3"><b>s</b></span> that can be controlled by a twodimensional slider (a <a href="sc://Slider2D"><span class="s3"><b>Slider2D</b></span></a>),a <a href="sc://RangeSlider"><span class="s3"><b>RangeSlider</b></span></a>, two numerical inputs (<a href="sc://NumberBox"><span class="s3"><b>NumberBox</b></span></a><span class="s3"><b>es</b></span>) or a <span class="s3">MIDI</span>-device. <span class="s3">CVWidget2D</span> have a built in <span class="s3">MIDI</span>-learn capability (see also <a href="sc://CCResponder"><span class="s3"><b>CCResponder</b></span></a>) - a slider or fader of a connected <span class="s3">MIDI</span>-device will automatically be connected if the <span class="s3">MIDi</span>-learn button is clicked in the widget and a hardware-slider is moved.<span class="Apple-tab-span">	</span></p>
<p class="p3"><br></p>
<p class="p4"><b>Creation</b></p>
<p class="p3"><br></p>
<p class="p1"><b>*new(parent, cv1, cv2, name, bounds, setUpArgs)</b></p>
<p class="p1"><b><span class="Apple-tab-span">	</span>parent</b> - the parent view: e.g. a <span class="s3">Window</span> or a <span class="s3">TabbedView</span></p>
<p class="p1"><span class="Apple-tab-span">	</span><b>cv1, cv2</b> - two <span class="s3">CVs</span> (have a look at the <span class="s3">CV</span> helpfile for mor information on that)</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>name</b> - each <span class="s3">CVWidget</span> will have a label displaying <span class="s5">this</span> name</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>bounds</b> - an instance of <span class="s3"><b>Rect</b></span>. <span class="s3">The</span> default widget-width will be 52 pixel, the widget-height will be 137 pixel.<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-tab-span">	</span><b>setUpArgs</b> - an array reflecting the setup of the connected external <span class="s3">MIDI</span>-device. <span class="s3">If</span> the setup consits of a single value (e.g.: 0) it will internally be converted into an array.<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="s3">If</span> not given explicitely new widgets will be instantiated with the following values:</p>
<p class="p5"><span class="Apple-tab-span">	</span></p>
<p class="p6"><span class="Apple-tab-span">	</span>[ 0, 1, 64, <span class="s6">""</span>, <span class="s7">nil</span>, 0.1 ]</p>
<p class="p5"><span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="Apple-tab-span">	</span>which stands for <i>midiMode</i>: 0, <i>midiResolution</i>: 1, <i>midiMean</i>: 64, <i>midistring</i>: empty string, <i>ctrlButtonBank</i>: <span class="s7">nil</span> and <i>softWithin</i>: 0.1</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="s3">Currently</span> two different (midi)modes are supported (represented by <i>midiMode</i> ):</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0: <span class="s3">MIDI</span>-output is 0-127</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>1: <span class="s3">MIDI</span>-output is a mean-value +/- in-/decrement. <span class="s3">If</span> no value for <i>midiMean</i> (third slot in setUpArgs) is given 64 is assumed to be the default value for <i>midiMean</i>.</p>
<p class="p1"><span class="Apple-tab-span">	</span><i>ctrlButtonBank</i> is a special parameter that can always be set to <span class="s7">nil</span>. <span class="s3">However</span>, if you work with a device like a <span class="s3">Doepfer</span> <span class="s3">Pocket</span>-<span class="s3">Dial</span>, which provides 16 hardware-knobs in 4 different banks, resulting in 64 possible controllers, <i>ctrlButtonBank</i> can be set to 16 (the number of controllers in one bank). <span class="s3">This</span> should make working with the gui more convenient as the controller-number will not simply be displayed as one in a consecutive row of numbers (e.g. 1-64) but rather as a combination of <i>bank</i>:<i>ctrl-nr </i>(e.g. 3:10 will stand for bank nr. 3 and controller 10). <i>ctrlButtonBank</i> should always be set to the number of knobs/sliders available in one bank.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1"><b>Note:</b> <span class="s3">Setting</span> a <span class="s3">CVWidget</span> to midiMode 1 will only make sense if your <span class="s3">MIDI</span>-device supports it. <span class="s3">In</span> <span class="s5">this</span> mode a <span class="s3">MIDI</span>-slider is assumed to output an in-/decremental value, not an absolute value between 0 and 127. <span class="s3">However</span>, the output is not assumed to be the increment/decrement only. <span class="s3">Rather</span> it will be the <i>mean</i> value +/- increment which makes it necessary to substract <i>mean</i> from the output (e.g. if the output equals 68 and <i>mean </i>is 64, a<i> </i>value of 64 is substracted and the result will be 4).</p>
<p class="p2"><br></p>
<p class="p1"><b>midiMode_</b></p>
<p class="p1"><span class="Apple-tab-span">	</span>0 - the default mode. <span class="s3">The</span> output reflects the absolute position of the adjecant slider.<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-tab-span">	</span>1 - in- resp. decremental output. <span class="s3">The</span> <span class="s3">Output</span> will be a mean-value (default: 64, see method <b>midiMean_</b>) +/- in- or decrement (determined be the the slider<span class="s8">'s accelaration)</span></p>
<p class="p7"><span class="Apple-tab-span">	</span></p>
<p class="p8"><b>midiResolution_</b></p>
<p class="p8"><span class="Apple-tab-span">	</span>default: 1</p>
<p class="p8"><span class="Apple-tab-span">	</span>This parameter will only have an effect if midiMode is set to 1 (endless faders). It determines the resolution of each fader. Higher values will result in a lower resolution, lower values will have the opposite effect.<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><b>midiMean_</b><span class="Apple-converted-space"> </span></p>
<p class="p8"><span class="Apple-tab-span">	</span>default: 64. Only relevant for midiMode == 1. It reflects the default output of a midislider in neutral position.</p>
<p class="p7"><span class="Apple-tab-span">	</span></p>
<p class="p8"><b>ctrlButtonBank_</b></p>
<p class="p8"><span class="Apple-tab-span">	</span>As midi-devices may have a number of different banks at limited number of sliders this offers some convenience in a way that the GUI will display the bank and its sliders from 1 to the max. number of hardware sliders. E.g. on a Doepfer Pocket Dial which has 16 sliders and 4 banks a setting like</p>
<p class="p7"><span class="Apple-tab-span">	</span></p>
<p class="p9"><span class="s9"><span class="Apple-tab-span">	</span></span>CVCenter.ctrlButtonBank_(16)</p>
<p class="p10"><span class="Apple-tab-span">	</span></p>
<p class="p8">will display the sliders in each bank like the following: 1:1..16, 2:1..16, 3:1..16, 4:1..16. Thus, slider number 36 (which is returned by the function within the corresponding CCResponder as 35) will be displayed as 3:4 (bank nr. 3, slider number 4 - corresponding to the number printed on the device and the selected bank).<span class="Apple-converted-space"> </span></p>
<p class="p7"><br></p>
<p class="p8"><b>softWithin_(val)</b></p>
<p class="p8"><span class="Apple-tab-span">	</span>val - by default 0.1</p>
<p class="p8"><span class="Apple-tab-span">	</span>a convenience method for the use in mode 0 (output: 0-127, non-endless). A new value (input) of a CV is set by a MIDI-slider only if the slider'<span class="s10">s value is within +/- softWithin/2 to the current value (input) of the </span><span class="s3">CV</span><span class="s10">, avoiding abrupt changes.</span></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="s3">Each</span> of the previously mentioned setter-methods are implemented as getters as well, which allows you to retrieve its values individually. <span class="s3">Alternatively</span> you may use *setup to retrieve all values at once:</p>
<p class="p2"><br></p>
<p class="p1"><b>setup</b></p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="s3">A</span> convenience-method, returning<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="s9"><span class="Apple-tab-span">	</span></span>[midiMode, midiMean, midistring, ctrlButtonBank]</p>
<p class="p2"><br></p>
<p class="p4"><b>Example</b></p>
<p class="p3"><br></p>
<p class="p6">s.boot;</p>
<p class="p6">a = { <span class="s11">|freq1, freq2|</span> <span class="s3">SinOsc</span>.ar([freq1, freq2]) * 0.3 }.play;</p>
<p class="p5"><br></p>
<p class="p6">(</p>
<p class="p6"><span class="s12">~cv</span> = <span class="s3">CV</span>.new(<span class="s8">\freq</span>.asSpec);<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="s12">~wdgt</span> = <span class="s3">CVWidget2D</span>(cvs: <span class="s12">~cv</span>!2, bounds: <span class="s3">Rect</span>(100, 100, 104, 166), actions: [{ <span class="s11">|cv|</span> a.set(<span class="s8">\freq1</span>, cv) }, { <span class="s11">|cv|</span> a.set(<span class="s8">\freq2</span>, cv) }] ).front;</p>
<p class="p6">)</p>
<p class="p5"><br></p>
<p class="p11">// change the Spec of the CV</p>
<p class="p11">// change is reflected in the widget immediately</p>
<p class="p11">// can also be done through the "edit Spec" button in the widget</p>
<p class="p6"><span class="s12">~wdgt</span>.spec_(<span class="s8">\freq</span>.asSpec)</p>
<p class="p5"><br></p>
<p class="p11">// change the MIDI-setup</p>
<p class="p11">// change will only take effect after disconnecting and reconnecting the MIDI-device</p>
<p class="p11"><span class="s12">~wdgt</span><span class="s10">.midiMode_(1); </span>// in-/decremental output mode</p>
<p class="p11"><span class="s12">~wdgt</span><span class="s10">.midiMean_(64); </span>// only necessary if midiMode == 1</p>
<p class="p11"><span class="s12">~wdgt</span><span class="s10">.midistring_(</span><span class="s6">"in-/decremtal"</span><span class="s10">); </span>// an arbitrary string displaying some info about the midi-setting of the widget</p>
<p class="p11"><span class="s12">~wdgt</span><span class="s10">.ctrlButtonBank_(16); </span>// should reflect the number of knobs/sliders on your hardware-device.</p>
<p class="p5"><br></p>
<p class="p11">// set some Synth-Controls<span class="Apple-converted-space"> </span></p>
<p class="p6">a = { <span class="s11">|freq=440|</span> <span class="s3">SinOsc</span>.ar(freq, mul: 0.4) }.play</p>
<p class="p6"><span class="s12">~cv</span>.action_({ <span class="s11">|cv|</span> a.set(<span class="s8">\freq</span>, cv.value) })</p>
<p class="p2"><br></p>
<p class="p12"><b>about the </b><span class="s3"><b>GUI</b></span></p>
<p class="p3"><br></p>
<p class="p1"><span class="s3">The</span> <span class="s3">Elements</span> within the <span class="s3">GUI</span> should be more or less selfexplanatory. <span class="s3">However</span>, one might ask why there the name is reflected twice - once as a non-editable label, once as an editable textfield. <span class="s3">The</span> reason for <span class="s5">this</span> is, that within <a href="CVCenter.html"><span class="s3"><b>CVCenter</b></span></a> the label will reflect the key-name under which a <span class="s3">CV</span> has been added to <span class="s3"><b>CVCenter</b></span>. <span class="s3">The</span> key may or may not reflect a key of a pattern or a control of a synth. <span class="s3">However</span>, a <span class="s3">CV</span> as part of <span class="s3"><b>CVCenter</b></span> may be used in any context, so it may be useful to be able to add some addititional information, independantly from the key-name.</p>
<p class="p1"><span class="s3">Within</span> every <span class="s3">CVWidget</span> there is a blue button, labeled <span class="s6">"L"</span>. <span class="s3">This</span> stands for <span class="s6">"learn"</span> - when clicked the button-color turns to red and the label becomes <span class="s6">"X"</span>. <span class="s3">In</span> <span class="s5">this</span> state the first <span class="s3">MIDI</span>-slider that gets moved gets connected to the particular <span class="s3">CVWidget</span> resp. the parameters controlled by it.</p>
<p class="p1"><span class="s3">Last</span> but not least you will find a (non-functional) button named <span class="s6">"MIDI"</span> - this should become a shortcut to the widget's MIDI-setup. As it is currently not known to the author which different setups will be useful to provide this functionality shall be implemented at a later point.</p>
</body>
</html>
