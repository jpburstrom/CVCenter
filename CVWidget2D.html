<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="1038.36">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #000000}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #000000; min-height: 14.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica; min-height: 17.0px}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica; color: #000000}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica; color: #000000; min-height: 17.0px}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; min-height: 14.0px}
p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco}
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #008224; min-height: 14.0px}
p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #008224; min-height: 14.0px}
p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #000000}
p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #142cc3}
p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #d21710}
span.s1 {font: 19.0px Helvetica}
span.s2 {text-decoration: underline}
span.s3 {color: #464fc4}
span.s4 {color: #000000}
span.s5 {font: 12.0px Helvetica}
span.s6 {color: #1c39f6}
span.s7 {color: #142cc3}
span.s8 {color: #ff7a29}
span.s9 {color: #008224}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><span class="s1"><b>CVWidget2D </b></span><b>a widget, wrapping <i>two</i> CVs, providing a twodimensional-slider, range-slider and a number-field for mouse-/keyboard-control resp. an automated midi-learn functionality to connect to midi-sliders on external hardware</b></p>
<p class="p2"><br></p>
<p class="p1"><b>inherits from: </b><a href="sc://Object"><b>Object</b></a><b> : CVWidget</b></p>
<p class="p1"><b>dependencies: </b><a href="../../../quarks/Conductor/help/Conductor-Help/Conductor.html"><b>Conductor</b></a><b> (</b><a href="sc://Quarks"><b>Quarks</b></a><b>)</b></p>
<p class="p2"><br></p>
<p class="p1">A<b> CVWidget </b>resp. its subclasses are supposed to be convenient GUI-classes similar to <a href="sc://EZSlider"><b>EZGui</b></a><b> </b>resp. its subclasses <a href="sc://EZSlider"><b>EZSlider</b></a>, <a href="../../../../../../../../Applications/SuperCollider3/common/build/Help/GUI/EZ-GUI/EZKnob.html"><b>EZKnob</b></a>, <a href="../../../../../../../../Applications/SuperCollider3/common/build/Help/GUI/EZ-GUI/EZRanger.html"><b>EZRanger</b></a><span class="s2"> </span>etc. and it should be possible to use it any GUI. However, its primary purpose is not the use as such. Much rather it should be understood as a module for <a href="CVCenter.html"><b>CVCenter</b></a>.</p>
<p class="p2"><br></p>
<p class="p1">A CVWidget2D is GUI-representation of two <a href="../../../quarks/Conductor/help/Conductor-Help/CV.html"><b>CV</b></a><b>s </b>(requires the <a href="../../../quarks/Conductor/help/Conductor-Help/Conductor.html"><b>Conductor</b></a>-Quark to be installed). Instantiating a CVWidget2D as an element in a GUI automatically instantiates two <a href="../../../quarks/Conductor/help/Conductor-Help/CV.html"><b>CV</b></a><b>s</b> that can be controlled by a twodimensional slider (a <a href="sc://Slider2D"><b>Slider2D</b></a>),a <a href="sc://RangeSlider"><b>RangeSlider</b></a>, two numerical inputs (<a href="sc://NumberBox"><b>NumberBox</b></a><b>es</b>) or a MIDI-device. CVWidget2D have a built in MIDI-learn capability (see also <a href="sc://CCResponder"><b>CCResponder</b></a>) - a slider or fader of a connected MIDI-device will automatically be connected if the MIDi-learn button is clicked in the widget and a hardware-slider is moved.<span class="Apple-tab-span">	</span></p>
<p class="p3"><br></p>
<p class="p4"><b>Creation</b></p>
<p class="p5"><br></p>
<p class="p1"><b>*new(parent, cv1, cv2, name, bounds, setUpArgs)</b></p>
<p class="p1"><b><span class="Apple-tab-span">	</span>parent</b> - the parent view: e.g. a Window or a TabbedView</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>cv1, cv2</b> - two CVs (have a look at the CV helpfile for mor information on that)</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>name</b> - each CVWidget will have a label displaying this name</p>
<p class="p1"><span class="Apple-tab-span">	</span><b>bounds</b> - an instance of <b>Rect</b>. The default widget-width will be 52 pixel, the widget-height will be 137 pixel.<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-tab-span">	</span><b>setUpArgs</b> - an array reflecting the setup of the connected external MIDI-device. If the setup consits of a single value (e.g.: 0) it will internally be converted into an array.<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-tab-span">	</span>If not given explicitely new widgets will be instantiated with the following values:</p>
<p class="p6"><span class="Apple-tab-span">	</span></p>
<p class="p7"><span class="Apple-tab-span">	</span>( midiMode: 0, midiResolution: 1, midiMean: 64, ctrlButtonBank: nil, softWithin: 0.1, calibrate: true )</p>
<p class="p6"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-tab-span">	</span>which stands for <i>midiMode</i>: 0, <i>midiResolution</i>: 1, <i>midiMean</i>: 64, <i>midistring</i>: empty string, <i>ctrlButtonBank</i>: <span class="s3">nil</span> and <i>softWithin</i>: 0.1</p>
<p class="p9"><span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="Apple-tab-span">	</span>Currently two different (midi)modes are supported (represented by <i>midiMode</i> ):</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0: MIDI-output is 0-127</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>1: MIDI-output is a mean-value +/- in-/decrement. If no value for <i>midiMean</i> (third slot in setUpArgs) is given 64 is assumed to be the default value for <i>midiMean</i>.</p>
<p class="p1"><span class="Apple-tab-span">	</span><i>ctrlButtonBank</i> is a special parameter that can always be set to nil. However, if you work with a device like a Doepfer Pocket-Dial, which provides 16 hardware-knobs in 4 different banks, resulting in 64 possible controllers, <i>ctrlButtonBank</i> can be set to 16 (the number of controllers in one bank). This should make working with the gui more convenient as the controller-number will not simply be displayed as one in a consecutive row of numbers (e.g. 1-64) but rather as a combination of <i>bank</i>:<i>ctrl-nr </i>(e.g. 3:10 will stand for bank nr. 3 and controller 10). <i>ctrlButtonBank</i> should always be set to the number of knobs/sliders available in one bank.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1"><b>Note:</b> Setting a CVWidget to midiMode 1 will only make sense if your MIDI-device supports it. In this mode a MIDI-slider is assumed to output an in-/decremental value, not an absolute value between 0 and 127. However, the output is not assumed to be the increment/decrement only. Rather it will be the <i>mean</i> value +/- increment which makes it necessary to substract <i>mean</i> from the output (e.g. if the output equals 68 and <i>mean </i>is 64, a<i> </i>value of 64 is substracted and the result will be 4).</p>
<p class="p9"><br></p>
<p class="p8"><b>setMidiMode(mode, key)</b></p>
<p class="p1"><span class="Apple-tab-span">	</span>0 - the default mode. The output reflects the absolute position of the adjecant slider.<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-tab-span">	</span>1 - in- resp. decremental output. The Output will be a mean-value (default: 64, see method <b>midiMean_</b>) +/- in- or decrement (determined be the the slider's accelaration)</p>
<p class="p1"><span class="Apple-tab-span">	</span>key - a Symbol: 'lo' or 'hi'</p>
<p class="p10"><span class="Apple-tab-span">	</span></p>
<p class="p1"><b>setMidiResolution(resolution, key)</b></p>
<p class="p1"><span class="Apple-tab-span">	</span>default: 1</p>
<p class="p1"><span class="Apple-tab-span">	</span>This parameter will only have an effect if midiMode is set to 1 (endless faders). It determines the resolution of each fader. Higher values will result in a lower resolution, lower values will have the opposite effect.<span class="Apple-converted-space"> </span></p>
<p class="p8"><span class="s4"><span class="Apple-tab-span">	</span></span>key - a Symbol: 'lo' or 'hi'</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s4"><b>setMidiMean(</b></span><b>meanval, key)</b></p>
<p class="p1"><span class="Apple-tab-span">	</span>default: 64. Only relevant for midiMode == 1. It reflects the default output of a midislider in neutral position.</p>
<p class="p8"><span class="Apple-tab-span">	</span>key - a Symbol: 'lo' or 'hi'</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1"><b>setCtrlButtonBank(numSliders, key)</b></p>
<p class="p1"><span class="Apple-tab-span">	</span>As midi-devices may have a number of different banks at limited number of sliders this offers some convenience in a way that the GUI will display the bank and its sliders from 1 to the max. number of hardware sliders. E.g. on a Doepfer Pocket Dial which has 16 sliders and 4 banks a setting like</p>
<p class="p10"><span class="Apple-tab-span">	</span></p>
<p class="p7"><span class="s5"><span class="Apple-tab-span">	</span></span>CVCenter.setCtrlButtonBank(16, \hi)</p>
<p class="p11"><span class="Apple-tab-span">	</span></p>
<p class="p1">will display the sliders in each bank like the following: 1:1..16, 2:1..16, 3:1..16, 4:1..16. Thus, slider number 36 (which is returned by the function within the corresponding CCResponder as 35) will be displayed as 3:4 (bank nr. 3, slider number 4 - corresponding to the number printed on the device and the selected bank).<span class="Apple-converted-space"> </span></p>
<p class="p8"><span class="s4"><span class="Apple-tab-span">	</span></span>key - a Symbol: 'lo' or 'hi'</p>
<p class="p2"><br></p>
<p class="p1"><b>setSoftWithin(val, key)</b></p>
<p class="p1"><span class="Apple-tab-span">	</span>val - by default 0.1</p>
<p class="p1"><span class="Apple-tab-span">	</span>a convenience method for the use in mode 0 (output: 0-127, non-endless). A new value (input) of a CV is set by a MIDI-slider only if the slider's value is within +/- softWithin/2 to the current value (input) of the CV, avoiding abrupt changes.</p>
<p class="p8"><span class="s4"><span class="Apple-tab-span">	</span></span>key - a Symbol: 'lo' or 'hi'</p>
<p class="p9"><span class="Apple-tab-span">	</span></p>
<p class="p8">All of the above mentioned methods have coresponding methods, beginning with "get" that return the currently set values.</p>
<p class="p9"><span class="Apple-tab-span">	</span></p>
<p class="p1">Each of the previously mentioned setter-methods are implemented as getters as well, which allows you to retrieve its values individually. Alternatively you may use *setup to retrieve all values at once:</p>
<p class="p9"><br></p>
<p class="p1"><b>setup</b></p>
<p class="p1"><span class="Apple-tab-span">	</span>A convenience-method, returning<span class="Apple-converted-space"> </span></p>
<p class="p12"><span class="s5"><span class="Apple-tab-span">	</span></span>(midiMode, midiMean, midiResolution, ctrlButtonBank, softWithin, calibrate)</p>
<p class="p2"><br></p>
<p class="p4"><b>Example</b></p>
<p class="p3"><br></p>
<p class="p7">s.boot;</p>
<p class="p7">a = { <span class="s6">|freq1, freq2|</span> <span class="s7">SinOsc</span>.ar([freq1, freq2]) * 0.3 }.play;</p>
<p class="p6"><br></p>
<p class="p7">(</p>
<p class="p7"><span class="s8">~cv</span> = <span class="s7">CV</span>.new(<span class="s9">\freq</span>.asSpec);<span class="Apple-converted-space"> </span></p>
<p class="p13"><span class="s8">~wdgt</span><span class="s4"> = </span>CVWidget2D<span class="s4">(</span></p>
<p class="p7"><span class="Apple-tab-span">	</span>cvs: <span class="s8">~cv</span>!2,<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span>bounds: <span class="s7">Rect</span>(100, 100, 104, 166),<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span>setup:(</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>lo: (</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>midiMode: 1,<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>midiMean: 64,<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>softWithin: 0.1,<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>midiResolution: 1,<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>ctrlButtonBank: 16,<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>clibrate: true</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>), hi: (</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>midiMode: 1,<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>midiMean: 64,<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>softWithin: 0.1,<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>midiResolution: 1,<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>ctrlButtonBank: 16,<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>clibrate: true</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p7"><span class="Apple-tab-span">	</span>), actions: [</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{ <span class="s6">|cv|</span> a.set(<span class="s9">\freq1</span>, cv) },</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{ <span class="s6">|cv|</span> a.set(<span class="s9">\freq2</span>, cv) }</p>
<p class="p7"><span class="Apple-tab-span">	</span>] ).front;</p>
<p class="p7">)</p>
<p class="p6"><br></p>
<p class="p14"><span class="s8">~wdgt</span><span class="s4">.midiConnect(chan: 0, num: 2, key: </span><span class="s9">\lo</span><span class="s4">) </span>// connect \lo to controller nr. 3, channel 1</p>
<p class="p14"><span class="s8">~wdgt</span><span class="s4">.midiDisconnect(</span><span class="s9">\lo</span><span class="s4">) </span>// remove the CCResponder from \lo again</p>
<p class="p14"><span class="s8">~wdgt</span><span class="s4">.midiConnect(key: </span><span class="s9">\lo</span><span class="s4">) </span>// connect \lo to the first slider that gets moved on your hardware</p>
<p class="p12"><span class="s8">~wdgt</span>.midiDisconnect(<span class="s9">\lo</span>)</p>
<p class="p6"><br></p>
<p class="p6"><br></p>
<p class="p14">// change the Spec of the CV</p>
<p class="p14">// change is reflected in the widget immediately</p>
<p class="p14">// can also be done through the "edit Spec" button in the widget</p>
<p class="p7"><span class="s8">~wdgt</span>.setSpec(<span class="s9">\freq</span>.asSpec)</p>
<p class="p6"><br></p>
<p class="p14">// change the MIDI-setup</p>
<p class="p14">// change will only take effect after disconnecting and reconnecting the MIDI-device</p>
<p class="p14"><span class="s8">~wdgt</span><span class="s4">.setMidiMode(1); </span>// in-/decremental output mode</p>
<p class="p14"><span class="s8">~wdgt</span><span class="s4">.setMidiMean(64); </span>// only necessary if midiMode == 1</p>
<p class="p14"><span class="s8">~wdgt</span><span class="s4">.setCtrlButtonBank(16); </span>// should reflect the number of knobs/sliders on your hardware-device.</p>
<p class="p6"><br></p>
<p class="p14">// set some Synth-Controls<span class="Apple-converted-space"> </span></p>
<p class="p7">a = { <span class="s6">|freq=440|</span> <span class="s7">SinOsc</span>.ar(freq, mul: 0.4) }.play</p>
<p class="p7"><span class="s8">~cv</span>.action_({ <span class="s6">|cv|</span> a.set(<span class="s9">\freq</span>, cv.value) })</p>
<p class="p9"><br></p>
<p class="p4"><b>about the GUI</b></p>
<p class="p3"><br></p>
<p class="p1">The Elements within the GUI should be more or less selfexplanatory. However, one might ask why there the name is reflected twice - once as a non-editable label, once as an editable textfield. The reason for this is, that within <a href="CVCenter.html"><b>CVCenter</b></a> the label will reflect the key-name under which a CV has been added to <b>CVCenter</b>. The key may or may not reflect a key of a pattern or a control of a synth. However, a CV as part of <b>CVCenter</b> may be used in any context, so it may be useful to be able to add some addititional information, independantly from the key-name.</p>
<p class="p1">Within every CVWidget there is a blue button, labeled "L". This stands for "learn" - when clicked the button-color turns to red and the label becomes "X". In this state the first MIDI-slider that gets moved gets connected to the particular CVWidget resp. the parameters controlled by it.</p>
<p class="p1">Last but not least you will find a (non-functional) button named "MIDI" - this should become a shortcut to the widget's MIDI-setup. As it is currently not known to the author which different setups will be useful to provide this functionality shall be implemented at a later point.</p>
</body>
</html>
